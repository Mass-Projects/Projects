<%- include("../partials/header.ejs") %> 

<div class="container mt-3">
    <h1 class="card-title text-light">Tow Trucker - AOP: <% if (aop.AOP === "") { %>
        N/A
    <% } else { %>
        <%= aop.AOP %>
    <% } %></h1>

    <ul class="list-group mt-3">
        <li class="list-group-item active">Active Calls <div class="float-right"> <button type="button" data-target="#notepad" data-toggle="modal" class="btn btn-success">Notepad</button> <button class="btn btn-success" onclick="refresh()">Refresh</button></div></li>
        <% if (calls.length > 0) { %>
            <% calls.forEach(call => { %>
                <li class="list-group-item bg-dark border-dark text-light">
                    <span class="bolder">Description: </span> <%= call.description %> <br>
                    <span class="bolder">Location: </span> <%= call.location %> <br>
                    <span class="bolder">Caller Name: </span> <%= call.name %> <br>
                    <div class="float-right">
                        <a href="/tow/cancel-call-<%= call.id %>" class="btn btn-success">End Call</a>
                    </div>
                </li>                
            <% }) %>
        <% } else { %>
            <li class="list-group-item bg-dark border-dark text-light">
                No Active Calls
            </li>
        <% } %>        
    </ul>

     <!-- Notepad -->
     <div class="modal fade" id="notepad" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content bg-dark border-dark text-light">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Notepad</h5>
              <button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <textarea name="notes" id="notes" cols="30" rows="15" class="form-control text-light bg-secondary border-secondary"></textarea>
              <p>This gets reset after a page reload</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary container" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
</div>

<script>
    function refresh() {
        document.location.reload()
    }
</script>